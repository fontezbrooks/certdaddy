{"version":3,"file":"main.js","mappings":"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","sources":["webpack://certdaddy/./node_modules/electron-cgi/connection-builder.js","webpack://certdaddy/./node_modules/electron-cgi/connection.js","webpack://certdaddy/./node_modules/electron-cgi/index.js","webpack://certdaddy/./node_modules/electron-cgi/request.js","webpack://certdaddy/./node_modules/electron-cgi/tab-separated-input-stream-parser.js","webpack://certdaddy/./node_modules/uuid/lib/bytesToUuid.js","webpack://certdaddy/./node_modules/uuid/lib/rng.js","webpack://certdaddy/./node_modules/uuid/v4.js","webpack://certdaddy/external node-commonjs \"child_process\"","webpack://certdaddy/external node-commonjs \"crypto\"","webpack://certdaddy/external node-commonjs \"electron\"","webpack://certdaddy/external node-commonjs \"events\"","webpack://certdaddy/external node-commonjs \"fs\"","webpack://certdaddy/external node-commonjs \"https\"","webpack://certdaddy/external node-commonjs \"path\"","webpack://certdaddy/webpack/bootstrap","webpack://certdaddy/external node-commonjs \"os\"","webpack://certdaddy/./src/main.ts"],"sourcesContent":["const { spawn } = require('child_process');\nconst { Connection } = require('./connection');\n\nexports.ConnectionBuilder = function ConnectionBuilder() {\n    var spawnArguments = null;\n    this.connectTo = (command, ...args) => {\n        spawnArguments = {\n            command,\n            args\n        };\n        return this;\n    };\n    this.build = () => {\n        if (!spawnArguments) {\n            throw new Error('Use connectTo(pathToExecutable, [arguments]) to specify to which executable to connect');\n        }\n        const executable = spawn(spawnArguments.command, spawnArguments.args);\n \n        if (!executable.pid)\n            throw new Error(`Could not start ${spawnArguments.command}. Are you sure you have the right path?`);\n \n        executable.on('exit', (code) => {\n            if(this.handleOnExit){\n                this.handleOnExit(code);\n            }\n            console.log(`Connection to ${spawnArguments.command} was terminated (code: ${code})`)\n        });\n        executable.stderr.on('data', data => {\n            if(this.handleOnStderr)\n            {\n                this.handleOnStderr(data);\n            }\n            process.stdout.write('\\x1b[7m'); //invert terminal colors\n            process.stdout.write(data);\n            process.stdout.write('\\x1b[0m'); //reset colors\n        });\n        return new Connection(executable.stdin, executable.stdout);\n    };\n        \n    this.handleOnStderr = null;\n    this.handleOnExit = null;\n    this.onStderr = function(handler) {\n        this.handleOnStderr = handler\n        return this;\n    }\n    this.onExit = function (handler) {\n        this.handleOnExit = handler;\n        return this;\n    }         \n}\n","const Request = require('./request');\nconst TabSeparatedInputStreamParser = require('./tab-separated-input-stream-parser');\n\n/** @param {import('stream').Writable} outStream */\nexports.Connection = function Connection(outStream, inStream) {\n    const responseHandlersQueue = [];\n    const requestHandlersQueue = [];\n\n    const inputStreamParser = new TabSeparatedInputStreamParser();\n\n    inStream.setEncoding('utf8');\n    inStream.on('data', (chunk) => {\n        inputStreamParser.addPartial(chunk);\n    });\n\n    inStream.on('close', () => {\n        if (this.onDisconnect) {\n            this.onDisconnect();\n        }\n    });\n\n    inputStreamParser.onResponse(response => {\n        const responseIds = responseHandlersQueue.map(r => r.id);\n        if (responseIds.indexOf(response.id) !== -1) {\n            responseHandlersQueue.splice(responseIds.indexOf(response.id), 1)[0].onResponse(null, response.result);\n        }\n    });\n\n    inputStreamParser.onError(errorResponse => {\n        const responseIds = responseHandlersQueue.map(r => r.id);\n        if (responseIds.indexOf(errorResponse.requestId) !== -1) {\n            responseHandlersQueue.splice(responseIds.indexOf(errorResponse.requestId), 1)[0].onResponse(JSON.parse(errorResponse.error));\n        }\n    })\n\n    inputStreamParser.onRequest(request => {\n        const requestType = request.type;\n        requestHandlersQueue.filter(rh => rh.type === requestType).forEach(handlerContainer => {\n            const requestHandler = handlerContainer.onRequest;\n            const resultArgs = requestHandler(request.args)\n            sendResponse(request.id, resultArgs);\n        });\n    });\n\n    const sendResponse = (requestId, resultArgs) => {\n        if (!outStream.writable) return; //stream was closed    \n        outStream.write(`{\"type\": \"RESPONSE\", \"response\": ${JSON.stringify({\n            id: requestId,\n            result: JSON.stringify(resultArgs === undefined ? null : resultArgs)\n        })}}\\t`);\n    }\n\n    const sendRequest = (request, onResponse) => {\n        if (!outStream.writable) return;\n        outStream.write(`{\"type\": \"REQUEST\", \"request\": ${JSON.stringify(request)}}\\t`);\n        if (onResponse) {\n            responseHandlersQueue.push({\n                id: request.id,\n                onResponse\n            });\n        }\n    };\n\n    this.onDisconnect = null;\n\n    this.send = (type, args = {}, onResponse = null) => {\n        if (typeof args === 'function' && onResponse === null) { //if there's only one argument and it's a function assume it's the callback\n            onResponse = args;\n            args = {}\n        }\n        if (onResponse === null) {\n            return new Promise((resolve, reject) => {\n                sendRequest(new Request(type, args), (err, result) => {\n                    if (err)\n                        reject(err)\n                    else\n                        resolve(result)\n                });\n            });\n        } else {\n            sendRequest(new Request(type, args), onResponse);\n        }\n    };\n\n    this.on = (type, onRequest) => {\n        requestHandlersQueue.push({ type, onRequest })\n    }\n\n    this.close = () => {\n        outStream.end();\n    };\n}\n","const { ConnectionBuilder } = require(\"./connection-builder\");\n\nmodule.exports = {\n    ConnectionBuilder\n};","const uuidv4 = require('uuid/v4');\n\nfunction Request(type, args) {\n    this.type = type;\n    this.id = uuidv4();\n    this.args = JSON.stringify(args);\n}\n\nmodule.exports = Request;","const { EventEmitter } = require('events');\n\nfunction TabSeparatedInputStreamParser() {\n    const messageEmitter = new EventEmitter();\n    let streamInput = '';\n\n    this.addPartial = streamContent => {        \n        streamInput += streamContent;\n        while (streamInput.indexOf('\\t') !== -1) {\n            const messageStr = streamInput.substring(0, streamInput.indexOf('\\t'));\n            streamInput = streamInput.substring(streamInput.indexOf('\\t') + 1);\n            let message = null;\n            try {\n                message = JSON.parse(messageStr);\n            } catch (e) {\n                throw new Error(`Invalid incoming JSON: ${messageStr}`);\n            }\n            if (message.type === 'RESPONSE') {\n                messageEmitter.emit('response',message.response);\n            }else if (message.type === 'REQUEST') {\n                messageEmitter.emit('request', message.request);\n            }else if (message.type === 'ERROR'){\n                messageEmitter.emit('error', message)\n            }\n        }\n    };\n\n    this.onResponse = handleResponseCallback => {\n        messageEmitter.on('response', handleResponseCallback);\n    };\n\n    this.onError = handleErrorCallback => {\n        messageEmitter.on('error', handleErrorCallback);\n    };\n\n\n    this.onRequest = handleRequestCallback => {\n        messageEmitter.on('request', handleRequestCallback);\n    };\n}\n\nmodule.exports = TabSeparatedInputStreamParser;","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"electron\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"https\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"os\");","import * as os from \"os\";\r\n\r\nconst { app, BrowserWindow, ipcMain } = require('electron');\r\nconst path = require('path');\r\nconst https = require('https');\r\nconst fs = require('fs');\r\nconst { ConnectionBuilder } = require(\"electron-cgi\");\r\nlet mainWindow;\r\nlet certDll;\r\n\r\nlet testPath = path.join(process.resourcesPath, \"CertDaddy/CertDaddyBuilds/Windows/CertDaddy.exe\");\r\ncertDll = (os.platform() === \"win32\") ? path.join(process.resourcesPath, \"CertDaddyBuilds/Windows/CertDaddy.dll\")\r\n    : (os.platform() === \"darwin\") ? path.join(process.resourcesPath, \"CertDaddyBuilds/MacOs/CertDaddy.dll\")\r\n        : path.join(process.resourcesPath, \"CertDaddyBuilds/Windows/CertDaddy.dll\");\r\n\r\nlet connection = new ConnectionBuilder()\r\n    .connectTo(\"CertDaddy/CertDaddyBuilds/Windows/CertDaddy.exe\")\r\n    .build();\r\nconst createWindow = () => {\r\n    mainWindow = new BrowserWindow({\r\n        width: 1257,\r\n        height: 827,\r\n        webPreferences: {\r\n            preload: path.join(__dirname, 'preload.js'),\r\n            contextIsolation: true\r\n        },\r\n    });\r\n\r\n    mainWindow.loadFile(path.join(__dirname, 'index.html'));\r\n    // mainWindow.webContents.openDevTools();\r\n    mainWindow.on('closed', () => {\r\n        mainWindow = null;\r\n    });\r\n\r\n    // mainWindow.setIcon(path.join(__dirname, 'CertDaddyIcon.png'));\r\n}\r\nconst iconName = path.join(__dirname, 'iconForDragAndDrop.png');\r\nconst icon = fs.createWriteStream(iconName);\r\n\r\nfs.writeFileSync(path.join(__dirname, 'drag-and-drop-1.md'), '# First file to test drag and drop')\r\nfs.writeFileSync(path.join(__dirname, 'drag-and-drop-2.md'), '# Second file to test drag and drop')\r\n\r\nhttps.get('https://img.icons8.com/ios/452/drag-and-drop.png', (response: any) => {\r\n    response.pipe(icon);\r\n});\r\n\r\napp.whenReady().then(async () => {\r\n    await createWindow();\r\n    console.log(__dirname);\r\n});\r\n\r\nipcMain.on('ondragstart', (event, filePath) => {\r\n    event.sender.startDrag({\r\n        file: path.join(__dirname, filePath),\r\n        icon: iconName,\r\n    })\r\n})\r\n\r\napp.on('window-all-closed', () => {\r\n    if (process.platform !== 'darwin') {\r\n        app.quit();\r\n    }\r\n});\r\n\r\napp.on('activate', () => {\r\n    if (mainWindow.length === 0) {\r\n        createWindow();\r\n    }\r\n});\r\n\r\nconnection.onDisconnect = () => {\r\n    console.log(\"lost\");\r\n};\r\n\r\nipcMain.handle('greeting',(event, args) => {\r\n    connection.send('greeting', `[${args}]`, (err: any, response: any) => {\r\n        if (err) {\r\n            console.log(err)\r\n        }\r\n        fs.writeFileSync(path.join(__dirname, 'test.txt'), response);\r\n        console.log(response)\r\n    });\r\n})\r\n\r\n"],"names":["spawn","Connection","exports","ConnectionBuilder","spawnArguments","this","connectTo","command","args","build","Error","executable","pid","on","code","handleOnExit","console","log","stderr","data","handleOnStderr","process","stdout","write","stdin","onStderr","handler","onExit","Request","TabSeparatedInputStreamParser","outStream","inStream","responseHandlersQueue","requestHandlersQueue","inputStreamParser","setEncoding","chunk","addPartial","onDisconnect","onResponse","response","responseIds","map","r","id","indexOf","splice","result","onError","errorResponse","requestId","JSON","parse","error","onRequest","request","requestType","type","filter","rh","forEach","handlerContainer","resultArgs","requestHandler","sendResponse","writable","stringify","undefined","sendRequest","push","send","Promise","resolve","reject","err","close","end","module","uuidv4","EventEmitter","messageEmitter","streamInput","streamContent","messageStr","substring","message","e","emit","handleResponseCallback","handleErrorCallback","handleRequestCallback","byteToHex","i","toString","substr","buf","offset","bth","join","crypto","randomBytes","rng","bytesToUuid","options","Array","rnds","random","ii","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","mainWindow","app","BrowserWindow","ipcMain","path","https","fs","resourcesPath","os","connection","createWindow","width","height","webPreferences","preload","__dirname","contextIsolation","loadFile","iconName","icon","createWriteStream","writeFileSync","get","pipe","whenReady","then","event","filePath","sender","startDrag","file","platform","quit","length","handle"],"sourceRoot":""}